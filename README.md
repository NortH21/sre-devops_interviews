# sre-devops_interviews
- [sre-devops\_interviews](#sre-devops_interviews)
  - [Lunux/network](#lunuxnetwork)
  - [k8s/docker](#k8sdocker)
  - [databases](#databases)
  - [ci/cd git](#cicd-git)
  - [ansible/terraform](#ansibleterraform)
  - [coding](#coding)
  - [обшие вопросы по sre/devops](#обшие-вопросы-по-sredevops)

## Lunux/network
- TLS: рассказать как работает, обычно на примере HTTPS
  ```
  Установка TCP-сессии:
  Клиент отправляет SYN-пакет на сервер.
  Сервер отвечает SYN-ACK-пакетом.
  Клиент отправляет ACK-пакет, завершив тем самым трехстороннее рукопожатие (SYN, SYN-ACK, ACK).
  
  Установка TLS-сессии:
  Клиент отправляет сообщение "ClientHello", указывая поддерживаемые версии TLS, шифры и случайное число.
  Сервер отвечает "ServerHello", выбирая версию TLS и шифр, а также отправляет свое случайное число.
  Сервер отправляет клиенту свой цифровой сертификат.
  Клиент проверяет сертификат и, если он действителен, генерирует предварительный ключ, шифрует его открытым ключом сервера и отправляет серверу.
  Установление симметричного ключа: Оба узла используют предварительный ключ для создания симметричного ключа, который будет использоваться для шифрования данных.
  ```

- Что такое copy on write?
  ```
  Управление памятью:
    Когда процесс создает новый процесс (например, с помощью fork()), операционная система не создает полную копию адресного пространства родительского процесса. Вместо этого оба процесса используют одно и то же физическое пространство памяти. Если один из процессов изменяет данные, только тогда создается новая копия этих данных, что позволяет избежать ненужных затрат на память.

  Файловые системы:
    В файловых системах, таких как Btrfs и ZFS, COW используется для управления версиями файлов и обеспечения целостности данных. При изменении файла создается новая версия, а старая версия остается неизменной, что позволяет легко откатиться к предыдущей версии в случае необходимости.
  ```
- Для чего помимо ping и traceroute используется ICMP
  ```
  Сообщения об ошибках:
    ICMP используется для передачи сообщений об ошибках, таких как "Destination Unreachable" (недоступный узел).

  Time Exceeded:
    ICMP отправляет сообщение "Time Exceeded", когда пакет превышает максимальное время жизни (TTL).
  ```
- JWT - что такое, какие поля в нем и где применяется
  ```
  JSON Web Token
  JWT состоит из трех частей, разделенных точками (.), каждая из которых закодирована в формате Base64Url:

    Header (Заголовок):
      Содержит информацию о типе токена (обычно "JWT") и используемом алгоритме подписи (например, HMAC SHA256 или RSA).

    Payload (Полезная нагрузка):
      Примеры стандартных утверждений:
        sub (Subject): идентификатор пользователя.
        iat (Issued At): время, когда токен был выдан.
        exp (Expiration Time): время истечения токена.

    Signature (Подпись):
      Создается путем кодирования заголовка и полезной нагрузки, а затем подписи с использованием указанного алгоритма и секретного ключа.
  ```
- NGINX: какие еще протоколы может обслуживать, помимо HTTP
  ```
  TCP, UDP, WebSocket, QUIC
  ```
- cfs scheduler или как выделяется процессорное время для процессов 
- Что дают права +x на дирректорию?  
  ```
  бит чтения отвечает за возможность выводить список файлов внутри директорий;
  
  бит записи — за возможность создания, изменения файлов внутри директории и изменения параметров директории;
  
  бит исполнения отвечает за возможность доступа к директории и файлам внутри директории.
  ```
- swap и java: в документации пишут для elasticsearch важно чтобы был выключен swap а для kafka без большой разницы, почему так?
  ```
  Elasticsearch — активно использует память для индексации и поиска данных. Она требует высокой производительности и низкой задержки при доступе к данным.
  Когда включен swap, операционная система может перемещать данные из оперативной памяти на диск, что значительно замедляет доступ к данным. Это может привести к ухудшению производительности Elasticsearch, особенно в пиковые нагрузки, когда требуется быстрая обработка запросов.
  Кроме того, Elasticsearch использует кэширование, и если данные находятся в swap, это может привести к тому, что кэш будет менее эффективным.

  Kafka - его архитектура и использование памяти отличаются. Kafka в основном работает с потоками данных и использует дисковое хранилище для хранения сообщений.
  Хотя наличие swap может также негативно сказаться на производительности Kafka, его архитектура более устойчива к задержкам, связанным с доступом к данным на диске. Kafka может продолжать обрабатывать сообщения, даже если часть данных находится в swap, хотя это может привести к увеличению времени обработки.

  Важно отметить, что для Kafka также рекомендуется иметь достаточное количество оперативной памяти, чтобы минимизировать использование swap, но это не так критично, как для Elasticsearch.
  ```
- Чем journalctl logs отличаются от обычных логов
  ```
  journalctl хранят логи в бинарном формате в системном журнале, что позволяет более эффективно управлять данными и выполнять поиск
  ```
- Утилита locate, как работает и зачем нужна?
  ```
  locate использует базу данных - /var/lib/mlocate/mlocate.db. Эта утилита сканирует файловую систему и создает индекс всех файлов и каталогов, которые она находит. Обновить можно через updatedb 

  Быстрый поиск: locate позволяет быстро находить файлы, не сканируя всю файловую систему в реальном времени, что экономит время и ресурсы.
  ```
- Зачем нужен Grub
  ```
  Когда компьютер включается, BIOS или UEFI загружает GRUB из загрузочного сектора диска. 

  GRUB использует файл конфигурации (обычно /boot/grub2/grub.cfg.), который содержит информацию о доступных операционных системах и параметрах загрузки.

  После выбора операционной системы GRUB загружает соответствующее ядро и инициализирует его. 

  После загрузки ядра GRUB передает управление операционной системе, и она начинает свою работу.
  ```
- Во время загрузки ОС , что такое init ram disk
  ```
  "initial ram disk" — это временная файловая система, которая загружается в оперативную память во время процесса загрузки операционной системы, прежде чем будет загружено основное ядро. Она используется для подготовки системы к загрузке и выполнения необходимых действий до того, как будет доступна основная файловая система.

  Поддержка драйверов: Initrd содержит необходимые драйверы для работы с оборудованием, которое может быть необходимо для доступа к основной файловой системе.

  Загрузка файловой системы: Initrd позволяет загружать и монтировать корневую файловую систему, которая может находиться на диске, требующем специальных драйверов или настроек.

  ```
- Что такое системные вызовы, какие знаешь, что они делают и что такое syscall
  ```
   Это интерфейс между приложениями и операционной системой. Они позволяют программам запрашивать услуги у операционной системы, такие как доступ к файловой системе, управление процессами, сетевое взаимодействие и другие функции, которые требуют привилегий, недоступных для обычного пользовательского кода.

    open — открывает файл.
    read — читает данные из файла.
    write — записывает данные в файл.
    close — закрывает файл.
    fork — создает новый процесс, копируя текущий.
    exec — заменяет текущий процесс новым процессом.
    wait — ожидает завершения дочернего процесса.
    kill — отправляет сигнал процессу (например, для завершения).

  Syscall в Linux — это функция-обёртка. Обычно,  системные вызовы не вызываются напрямую, это делается через обёрточную функцию. Первым аргументом этой функции является номер системного вызова, а остальные аргументы у каждого системного вызова свои.
  ```
- Открыли htop - что значит значение steal time у процесса
  ```
  Значение "steal time" (время кражи) у процесса относится к времени, в течение которого виртуальная машина (если вы используете виртуализацию) не могла получить доступ к процессорным ресурсам, потому что они использовались другой виртуальной машиной. 
  ```
- Ввели команду "curl https://tbank.ru" расскажи что происходит, начиная с "откуда берется бинарник  curl"
- Как работает DHCP? что будет если в сети отвечают 2 DHCP сервера , как произойдет согласование чью конфигурацию взять
  ```
  DHCP Discover: Клиент отправляет широковещательный запрос для поиска DHCP-серверов.

  DHCP Offer: DHCP-серверы отвечают предложением IP-адреса и параметров конфигурации.

  DHCP Request: Клиент выбирает одно предложение и отправляет запрос на подтверждение выбранного IP-адреса.

  DHCP Acknowledgment: DHCP-сервер подтверждает назначение IP-адреса и отправляет окончательную конфигурацию.

  Если в сети отвечают два DHCP-сервера:

  Конфликт: Если оба предлагают один и тот же IP-адрес, может возникнуть конфликт.

  Приоритет: Клиенты обычно выбирают ответ от первого сервера, который получили.
  ```
- Какие заголовки в http обязательны, какие бывают
  ```
  Обязательные заголовки:
  Request-Line (для запросов):
    Включает метод (например, GET, POST), URI и версию протокола (например, HTTP/1.1).
  Host:
    Указывает имя хоста и, при необходимости, порт. Обязателен для всех HTTP/1.1 запросов.
  ```
- Чем отличается http 1.1 от http 2.0
  ```
  Мультиплексирование
  HTTP/1.1: Последовательная обработка запросов.
  HTTP/2.0: Одновременная обработка нескольких запросов.

  Сжатие заголовков
  HTTP/1.1: Заголовки передаются в текстовом виде.
  HTTP/2.0: Заголовки сжимаются (HPACK).

  Соединения
  HTTP/1.1: Для каждого запроса может потребоваться новое соединение, хотя поддерживается и постоянное соединение (keep-alive)
  HTTP/2.0: Использует одно соединение для множества запросов.
 
  Приоритеты
  HTTP/1.1: Нет поддержки приоритезации.
  HTTP/2.0: Поддержка приоритетов для запросов.
  
  Формат передачи
  HTTP/1.1: Текстовый формат.
  HTTP/2.0: Бинарный формат.
  ```
- Что за тип данных в http "multipart/form-data"
- Что делать если нужно увеличить пропускную способность сети (lacp/bonding)
- Приведи пример журналированой файловой системы
  ```
  ext3, ext4, xfs, ntfs
  Перед тем как внести изменения в файловую систему, информация о предстоящих изменениях записывается в журнал.
  ```
- Если есть сервер и у него несколько сертификатов TLS, как понять каким ответить(Server Name Indication)
  ```
  При установлении соединения клиент отправляет "ClientHello" сообщение, в котором указывает имя хоста в поле SNI.

  Сервер получает это сообщение и извлекает имя хоста из поля SNI.
  
  На основе полученного имени хоста сервер выбирает соответствующий сертификат из своего хранилища сертификатов.
  
  Сервер отправляет "ServerHello" сообщение с выбранным сертификатом, и соединение устанавливается с использованием этого сертификата.
  ```
- Что такое Nat
## k8s/docker
- перечисли типы docker networks и как каждая работает
- что такое NodePort 
  - 'https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport'
- Создадим под с label app=nginx и создадим деплоймент с таким же matchLabels и labels, возьмет ли депплоймент под управление этот под и как деплоймент понимает какие поды ему принадлежат?
- какие элемент cotrol plane имеют master election
- что такое drain и cordon, в чем их отличие?
- что такое multistage сборка?
- что такое CRI, CNI, CRD, CSI?
- как избежать нежелательного выселения подов в случае, если допустим другая команда решила повыселять ваши поды с общиз нод. 
  - PDB
- что такое Admission Controller
- что такое PVC?
- сколько минимально нужно контейнеров чтобы запустить под
  - тут надо знать о pause контейнере, 2
- на основе каких технологий работают контейнеры, что ограничивают cgroups и namespaces(тут почитай получше)?
## databases
- kafka: что надо сделать чтобы добавить консьюмера в консьюм группу ?
  - речь о добавлении партиций, несколько консьюмеров не могут читать из одной партиции
- типы хостов в elasticsearch и что каждый делает?
- CAP теорема и её расширение PACELC
  ```
  CAP теорема (Consistency, Availability, Partition Tolerance) утверждает, что в распределённых системах невозможно одновременно обеспечить все три свойства:

  Consistency (Согласованность): Все узлы системы видят одни и те же данные в одно и то же время.

  Availability (Доступность): Каждый запрос получает ответ, даже если некоторые узлы недоступны.

  Partition Tolerance (Устойчивость к разделению): Система продолжает функционировать, даже если сеть разделена на части, и узлы не могут обмениваться данными.

  PACELC теорема (если есть разделение, то выбирай между Consistency и Availability, иначе выбирай между Latency и Consistency) расширяет CAP теорему, добавляя аспект латентности:

  Если нет разделения:
  Latency (Задержка): Системы могут выбирать между согласованностью и задержкой. Например, можно оптимизировать для более быстрой обработки запросов, жертвуя согласованностью.

  Если есть разделение:
  Система должна выбирать между согласованностью и доступностью, как в CAP теореме.
  ```
- ACID и BASE
  ```
  ACID и BASE — это два различных подхода к управлению транзакциями и согласованностью данных в системах управления базами данных.

  Atomicity (Атомарность): Транзакция выполняется полностью или не выполняется вовсе. Если одна часть транзакции не может быть выполнена, вся транзакция откатывается.
  
  Consistency (Согласованность): Транзакция переводит базу данных из одного согласованного состояния в другое. Все правила и ограничения базы данных должны соблюдаться.

  Isolation (Изолированность): Одновременные транзакции не должны влиять друг на друга.  
  Результаты одной транзакции не должны быть видны другим до её завершения.

  Durability (Надежность): После завершения транзакции изменения сохраняются в базе данных, даже в случае сбоя системы.

  BASE:
  Basically Available (В основном доступно): Система гарантирует, что данные будут доступны, даже если некоторые узлы недоступны.

  Soft state (Мягкое состояние): Состояние системы может изменяться со временем, даже без новых операций. Это связано с тем, что данные могут быть реплицированы и синхронизированы асинхронно.

  Eventual consistency (В конечном итоге согласованность): Система гарантирует, что, если нет новых обновлений, все узлы в конечном итоге придут к согласованному состоянию.

  ACID ориентирован на строгую согласованность и надежность, что делает его подходящим для транзакционных систем, таких как банковские приложения.
  
  BASE более гибок и подходит для распределённых систем, где важнее доступность и масштабируемость, чем строгая согласованность.
  ```
- для какого типа данных нельзя создать индекс?
- Mysql: типы движков таблиц
- Как строится индекс b-tree в БД
- Уровни изоляции в БД
  ```
  Read Uncommitted (Чтение неподтвержденных данных):
    Наименьший уровень изоляции.
    Позволяет транзакциям читать данные, которые были изменены другими транзакциями, даже если эти изменения еще не были зафиксированы (committed).
    Может привести к "грязным чтениям", когда одна транзакция читает данные, которые могут быть отменены другой транзакцией.

  Read Committed (Чтение подтвержденных данных):
    Транзакции могут читать только те данные, которые были зафиксированы.
    Исключает "грязные чтения", но может привести к "неповторяемым чтениям", когда данные, прочитанные одной транзакцией, могут измениться, если другая транзакция зафиксирует изменения.

  Repeatable Read (Повторяемое чтение):
    Гарантирует, что если транзакция читает данные, она будет видеть одни и те же данные при последующих чтениях в рамках этой транзакции.
    Исключает "грязные чтения" и "неповторяемые чтения", но может привести к "фантомным чтениям", когда новая строка, соответствующая условию запроса, может быть добавлена другой транзакцией после того, как первая транзакция уже выполнила свой запрос.

  Serializable (Сериализуемый):
    Наивысший уровень изоляции.
    Гарантирует, что транзакции будут выполняться так, как если бы они были выполнены последовательно, одна за другой.
    Исключает все виды проблем, включая "грязные чтения", "неповторяемые чтения" и "фантомные чтения", но может значительно снизить производительность из-за блокировок и ожиданий.
  ```
- Уровни консистентности данных в БД
  ```
  Strong Consistency (Сильная консистентность): Гарантирует, что все операции чтения возвращают последние записанные данные. Это означает, что после завершения записи все последующие чтения будут видеть это изменение.

  Eventual Consistency (Конечная консистентность): Гарантирует, что если нет новых обновлений, все копии данных в системе в конечном итоге станут согласованными. Это часто используется в распределенных системах, где высокая доступность важнее, чем мгновенная согласованность.

  Causal Consistency (Причинная консистентность): Гарантирует, что операции, которые могут быть причинно связаны, будут видны в том порядке, в котором они были выполнены.

  Read Your Writes (Чтение своих записей): Гарантирует, что после записи данные будут доступны для чтения в рамках той же сессии.
  ```
- Что такое партиционирование и шардирование в БД
## ci/cd git
- типы деплоев
- вот есть несколько репозиториев и тебе надо в каждый добавить одинаковую джобу
  - ожидается что расскажешь об git includes 
- чем rebase отличается от merge
## ansible/terraform
- чем отличается в ansible command от shell и от raw?
- terraform: чем отличается count от foreach
- terraform: допустим твой коллега удалил из облака виртуалку, которая управлялась терраформом, как тебее прокатить терраформ и ты не хочешь чтобы она создавалась/менялась и так далее, как её убрать из под управления терраформа?
  - удалить из стейта (terraform state rm {эта виртуалка})
- terraform: допустим у вашей команде стейт хранится в s3 и вы с коллегой одновременно внесли изменения и нажали terraform apply, что произойдет, чье изменеени применится?
  - тут надо знать что есть lock, и одно из изменений не применится, но лучше подробнее почитать
## coding
- Что такое лямбда функции?
- Что такое decorator в python
  ```
  def my_decorator(func):
      def wrapper(*args, **kwargs):
          print("Перед вызовом функции")
          result = func(*args, **kwargs)
          print("После вызова функции")
          return result
      return wrapper

  @my_decorator
  def say_hello(name):
      print(f"Привет, {name}!")

  # Вызов декорированной функции
  say_hello("Алексей")
  ```

- Какой элемент в python содержит не повторяющиеся элементы
  ```
  set (множество по русски)
  ```
## обшие вопросы по sre/devops
- Что такое metrics cardinality и чем это опасно?
- 4 золотых сигнала SRE
  - https://habr.com/ru/companies/flant/articles/462503/
- что такое SLI/SLO/SLA
  ```
  SLI (Service Level Indicator) — это метрика, которая используется для измерения уровня предоставления услуги. SLI может включать такие показатели, как время отклика, доступность системы или количество ошибок. Это конкретные данные, которые помогают понять, насколько хорошо услуга работает.

  SLO (Service Level Objective) — это целевое значение для SLI. Это конкретные, измеримые цели, которые организация стремится достичь. Например, SLO может быть установлено на уровне 99,9% доступности сервиса в месяц. SLO помогает определить, насколько хорошо услуга соответствует ожиданиям пользователей.

  SLA (Service Level Agreement) — это формальное соглашение между поставщиком услуг и клиентом, в котором описываются уровни обслуживания, которые будут предоставлены, а также последствия за их несоблюдение. SLA может включать SLI и SLO, а также другие условия, такие как время реакции на запросы и компенсации за недоступность услуги.
  ```
- 12 factor app 
  - https://habr.com/ru/companies/slurm/articles/785658/
- Идеальный пайплайн 
  - https://habr.com/ru/companies/rabota/articles/560922/
- IAC какие подходы бывают, чем отличаются?
  - 'декларативный и императивный'
- как работает механизм fallback (мониторинг кол-ва ошибок, и при достижении предела - автоматически перенаправляется на страницу "мы на обслуживании")
- рассказать как работает криптография на примере подписания документа
- Какие сетевые приемы знаешь для распределенной системы(например CDN)

